#include <stdio.h>
#include <stdlib.h>
#include "../Util.h"
#include "../timer.h"
#include "../Monty.h"

void gen(int* X,int* Y,monty_str* monty){
    int t0;
    int t1;
    int t2;
    int t3;
    int t4;
    int t5;
    int t6;
    int t7;
    int t8;
    int t9;
    int t10;
    int t11;
    int t12;
    int t13;
    int t14;
    int t15;
    int t16;
    int t17;
    int t18;
    int t19;
    int t20;
    int t21;
    int t22;
    int t23;
    int t24;
    int t25;
    int t26;
    int t27;
    int t28;
    int t29;
    int t30;
    int t31;
    int t32;
    int t33;
    int t34;
    int t35;
    int t36;
    int t37;
    int t38;
    int t39;
    int t40;
    int t41;
    int t42;
    int t43;
    int t44;
    int t45;
    int t46;
    int t47;
    int t48;
    int t49;
    int t50;
    int t51;
    int t52;
    int t53;
    int t54;
    int t55;
    int t56;
    int t57;
    int t58;
    int t59;
    int t60;
    int t61;
    int t62;
    int t63;
    int t64;
    int t65;
    int t66;
    int t67;
    int t68;
    int t69;
    int t70;
    int t71;
    int t72;
    int t73;
    int t74;
    int t75;
    int t76;
    int t77;
    int t78;
    int t79;
    int t80;
    int t81;
    int t82;
    int t83;
    int t84;
    int t85;
    int t86;
    int t87;
    int t88;
    int t89;
    int t90;
    int t91;
    int t92;
    int t93;
    int t94;
    int t95;
    int t96;
    int t97;
    int t98;
    int t99;
    int t100;
    int t101;
    int t102;
    int t103;
    int t104;
    int t105;
    int t106;
    int t107;
    int t108;
    int t109;
    int t110;
    int t111;
    int t112;
    int t113;
    int t114;
    int t115;
    int t116;
    int t117;
    int t118;
    int t119;
    int t120;
    int t121;
    int t122;
    int t123;
    int t124;
    int t125;
    int t126;
    int t127;
    int t128;
    int t129;
    int t130;
    int t131;
    int t132;
    int t133;
    int t134;
    int t135;
    int t136;
    int t137;
    int t138;
    int t139;
    int t140;
    int t141;
    int t142;
    int t143;
    int t144;
    int t145;
    int t146;
    int t147;
    int t148;
    int t149;
    int t150;
    int t151;
    int t152;
    int t153;
    int t154;
    int t155;
    int t156;
    int t157;
    int t158;
    int t159;
    t0 = X[0];
    t1 = X[2];
    t2 = X[4];
    t3 = X[6];
    t4 = X[8];
    t5 = X[10];
    t6 = X[12];
    t7 = X[14];
    t8 = X[1];
    t9 = X[3];
    t10 = X[5];
    t11 = X[7];
    t12 = X[9];
    t13 = X[11];
    t14 = X[13];
    t15 = X[15];
    t16 = (t0 + (t2 + (t4 + t6)));
    t18 = (t0 + (REDC(monty,(488 * t2)) + (REDC(monty,(7193 * t6)) - t4)));
    t20 = (t0 + ((t4 - t6) - t2));
    t22 = (t0 + (REDC(monty,(7193 * t2)) + (REDC(monty,(488 * t6)) - t4)));
    t17 = (t1 + (t3 + (t5 + t7)));
    t19 = (t1 + (REDC(monty,(488 * t3)) + (REDC(monty,(7193 * t7)) - t5)));
    t21 = (t1 + ((t5 - t7) - t3));
    t23 = (t1 + (REDC(monty,(7193 * t3)) + (REDC(monty,(488 * t7)) - t5)));
    t24 = (t8 + (t10 + (t12 + t14)));
    t26 = (t8 + (REDC(monty,(488 * t10)) + (REDC(monty,(7193 * t14)) - t12)));
    t28 = (t8 + ((t12 - t14) - t10));
    t30 = (t8 + (REDC(monty,(7193 * t10)) + (REDC(monty,(488 * t14)) - t12)));
    t25 = (t9 + (t11 + (t13 + t15)));
    t27 = (t9 + (REDC(monty,(488 * t11)) + (REDC(monty,(7193 * t15)) - t13)));
    t29 = (t9 + ((t13 - t15) - t11));
    t31 = (t9 + (REDC(monty,(7193 * t11)) + (REDC(monty,(488 * t15)) - t13)));
    t32 = t16;
    t33 = t17;
    t34 = t24;
    t35 = t25;
    t36 = t18;
    t37 = t19;
    t38 = t26;
    t39 = t27;
    t40 = t20;
    t41 = t21;
    t42 = t28;
    t43 = t29;
    t44 = t22;
    t45 = t23;
    t46 = t30;
    t47 = t31;
    t48 = (t32 + t33);
    t49 = (t32 - t33);
    t50 = (t34 + t35);
    t51 = (t34 - t35);
    t52 = (t36 + REDC(monty,(507 * t37)));
    t53 = (t36 + REDC(monty,(7174 * t37)));
    t54 = (t38 + REDC(monty,(507 * t39)));
    t55 = (t38 + REDC(monty,(7174 * t39)));
    t56 = (t40 + REDC(monty,(488 * t41)));
    t57 = (t40 + REDC(monty,(7193 * t41)));
    t58 = (t42 + REDC(monty,(488 * t43)));
    t59 = (t42 + REDC(monty,(7193 * t43)));
    t60 = (t44 + REDC(monty,(2318 * t45)));
    t61 = (t44 + REDC(monty,(5363 * t45)));
    t62 = (t46 + REDC(monty,(2318 * t47)));
    t63 = (t46 + REDC(monty,(5363 * t47)));
    t64 = t48;
    t65 = t50;
    t66 = t49;
    t67 = t51;
    t68 = t52;
    t69 = t54;
    t70 = t53;
    t71 = t55;
    t72 = t56;
    t73 = t58;
    t74 = t57;
    t75 = t59;
    t76 = t60;
    t77 = t62;
    t78 = t61;
    t79 = t63;
    t80 = t64;
    t81 = t65;
    t82 = t66;
    t83 = t67;
    t84 = t68;
    t85 = t69;
    t86 = t70;
    t87 = t71;
    t88 = t72;
    t89 = t73;
    t90 = t74;
    t91 = t75;
    t92 = t76;
    t93 = t77;
    t94 = t78;
    t95 = t79;
    t96 = t80;
    t97 = t81;
    t98 = t82;
    t99 = REDC(monty,(488 * t83));
    t100 = t84;
    t101 = REDC(monty,(1646 * t85));
    t102 = t86;
    t103 = REDC(monty,(7374 * t87));
    t104 = t88;
    t105 = REDC(monty,(507 * t89));
    t106 = t90;
    t107 = REDC(monty,(2318 * t91));
    t108 = t92;
    t109 = REDC(monty,(3978 * t93));
    t110 = t94;
    t111 = REDC(monty,(462 * t95));
    t112 = (t96 + t97);
    t113 = (t96 - t97);
    t114 = (t98 + t99);
    t115 = (t98 - t99);
    t116 = (t100 + t101);
    t117 = (t100 - t101);
    t118 = (t102 + t103);
    t119 = (t102 - t103);
    t120 = (t104 + t105);
    t121 = (t104 - t105);
    t122 = (t106 + t107);
    t123 = (t106 - t107);
    t124 = (t108 + t109);
    t125 = (t108 - t109);
    t126 = (t110 + t111);
    t127 = (t110 - t111);
    t128 = t112;
    t129 = t113;
    t130 = t114;
    t131 = t115;
    t132 = t116;
    t133 = t117;
    t134 = t118;
    t135 = t119;
    t136 = t120;
    t137 = t121;
    t138 = t122;
    t139 = t123;
    t140 = t124;
    t141 = t125;
    t142 = t126;
    t143 = t127;
    t144 = t128;
    t145 = t129;
    t146 = t130;
    t147 = t131;
    t148 = t132;
    t149 = t133;
    t150 = t134;
    t151 = t135;
    t152 = t136;
    t153 = t137;
    t154 = t138;
    t155 = t139;
    t156 = t140;
    t157 = t141;
    t158 = t142;
    t159 = t143;
    Y[0] = t144;
    Y[1] = t145;
    Y[2] = t146;
    Y[3] = t147;
    Y[4] = t148;
    Y[5] = t149;
    Y[6] = t150;
    Y[7] = t151;
    Y[8] = t152;
    Y[9] = t153;
    Y[10] = t154;
    Y[11] = t155;
    Y[12] = t156;
    Y[13] = t157;
    Y[14] = t158;
    Y[15] = t159;

}

int main(int argc,char** argv){
    int* X = malloc(sizeof(int)*16);
    int* Y = malloc(sizeof(int)*16);
    
    for(int i=0; i<16; i++){
      X[i]=i;
    }
    
    monty_str monty;
    monty_init(&monty,7681,8192,7679,7200,13);
    for(int i=0; i<16; i++){
      toResidue(&monty,X[i]);
    }
    
    initialize_timer();
    start_timer();
    
    gen(X,Y,&monty);
    
    stop_timer();
    printf("Elapsed time: %f\n",elapsed_time());
    
    for(int i=0; i<16; i++){
      fromResidue(&monty,Y[i]);
    }
    
    for(int i=0; i<16; i++){
      Y[i]=(((Y[i]+7681)%7681)+7681)%7681;
    }
    
    print_array("result",Y,16);
    
    free(X);
    free(Y);
    

}

// op count: fromList [(CBinary CAdd,54),(CBinary CSubtract,26),(CBinary CMultiply,35)]
